<html>
<head>
  <title>非关系型数据库NoSQL 之 memcache   &amp;  Redis</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="893"/>
<h1>非关系型数据库NoSQL 之 memcache   &amp;  Redis</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">1 memcached</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.1 memcached是什么</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Memcached是<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">key-value型的分布式存储系统</strong>，其使用目的缓存小块的任意数据（字符串、对象），一般用于缓存数据库查询结果，减少数据库的访问次数，提高Web应用的相应速度。目前主流编程语言都实现了Memcached的客户端。<br/>
memcached是应用较广的开源分布式缓存产品之一，它本身其实不提供分布式解决方案。<br/>
在服务端，memcached集群环境实际就是一个个memcached服务器的堆积，环境搭建较为简单；cache的分布式主要是在客户端实现，通过客户端的路由处理来达到分布式解决方案的目的。<br/>
客户端做路由的原理非常简单，应用服务器在每次存取某key的value时，通过某种算法把key映射到某台memcached服务器nodeA上，因此这个key所有操作都在nodeA上，结构图如下：<br/>
<img src="非关系型数据库NoSQL 之 memcache   &  Redis_files/memcache.png" type="image/png" data-filename="memcache.png"/><br/>
memcache采用一致性哈希算法作为路由策略。<br/>
<img src="非关系型数据库NoSQL 之 memcache   &  Redis_files/一致性hash.png" type="image/png" data-filename="一致性hash.png"/><br/>
相对于一般hash（如简单取模）的算法，一致性hash算法除了计算key的hash值外，还会计算每个server对应的hash值，然后将这些hash值映射到一个有限的值域上（比如0~2^32）。通过寻找hash值大于hash(key)的最小server作为存储该key数据的目标server。如果找不到，则直接把具有最小hash值的server作为目标server。同时，一定程度上，解决了扩容问题，增加或删除单个节点，对于整个集群来说，不会有大的影响。最近版本，增加了虚拟节点的设计，进一步提升了可用性。</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.2 特性</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">协议简单</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">基于libevent的事件处理</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">内置内存存储方式</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">memcached不互相通信的分布式</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">不支持持久化</strong></li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.3 内存结构</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">memcache由<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">slab、chunk和item</strong>构成。<br/>
<img src="非关系型数据库NoSQL 之 memcache   &  Redis_files/memstruct.png" type="image/png" data-filename="memstruct.png"/><br/>
slab是一个内存块，它是memcached一次申请内存的最小单位。在启动memcached的时候一般会使用参数-m指定其可用内存，但是并不是在启动的那一刻所有的内存就全部分配出去了，只有在需要的时候才会去申请，而且每次申请一定是一个slab。Slab的大小固定为1M（1048576 Byte），一个slab由若干个大小相等的chunk组成。每个chunk中都保存了一个item结构体、一对key和value。<br/>
虽然在同一个slab中chunk的大小相等的，但是在不同的slab中chunk的大小并不一定相等，在memcached中按照chunk的大小不同，可以把slab分为很多种类（class），默认情况下memcached把slab分为40类（class1～class40），在class 1中，chunk的大小为80字节，由于一个slab的大小是固定的1048576字节（1M），因此在class1中最多可以有13107个chunk（也就是这个slab能存最多13107个小于80字节的key-value数据）。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">memcached内存管理采取<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">预分配、分组管理</strong>的方式。</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">分组管理</strong>就是我们上面提到的slab class，按照chunk的大小slab被分为很多种类。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">内存预分配</strong>过程是：向memcached添加一个item时候，memcached首先会根据item的大小，来选择最合适的slab class。</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2 Redis 介绍</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.1 Redis是什么</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">redis是一个开源的、使用C语言编写的、支持网络交互的、可基于内存也可持久化的<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Key-Value数据库</strong>。<br/>
redis可以实现内存存储和持久化、模拟类似HttpSession这种需要设置过期时间的功能、发布订阅消息系统    、定时器和计数器。</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.2 Redis支持的数据类型</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">1.字符串（strings）：基本类型，可以做数值操作</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">2.字符串列表（lists）：底层用链表实现，插入删除快，定位慢；有序</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">3.字符串集合（sets）：无序；可用来实现取交集、并集等</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">4.有序字符串集合（sorted sets）：有序，每个元素都关联一个序号；</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">5.哈希（hashes）：存的是字符串和字符串值之间的映射</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">而关于key，有几个点要提醒大家：<br/>
1.key不要太长，尽量不要超过1024字节，这不仅消耗内存，而且会降低查找的效率；<br/>
2.key也不要太短，太短的话，key的可读性会降低；<br/>
3.在一个项目中，key最好使用统一的命名模式，例如user:10000:passwd。</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.3 Redis持久化</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">redis提供了两种持久化的方式，分别是RDB（Redis DataBase）和AOF（Append Only File）。</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">RDB，简而言之，就是在不同的时间点，将redis存储的数据生成快照并存储到磁盘等介质上；</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">AOF，则是换了一个角度来实现持久化，那就是将redis执行过的所有写指令记录下来，在下次redis重新启动时，只要把这些写指令从前到后再重复执行一遍，就可以实现数据恢复了。</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">其实RDB和AOF两种方式也可以同时使用，在这种情况下，如果redis重启的话，则会优先采用AOF方式来进行数据恢复，这是因为AOF方式的数据恢复完整度更高。<br/>
如果你没有数据持久化的需求，也完全可以关闭RDB和AOF方式，这样的话，redis将变成一个纯内存数据库，就像memcache一样。</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.3.1 RDB</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">RDB方式：redis data base , 用于做内存数据的快照，此过程会fork一个子进程来操作，因此不用担心会影响当前的进程。   <br/>
RDB触发条件有以下几种：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">1.根据配置规则进行自动快照</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">2.用户执行SAVE（阻塞， 只管保存快照，其他的等待）或者BGSAVE（异步）命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">3.执行FLUSHALL命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">4.执行复制(replication)时</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">RDB 的优缺点   <br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">优点</strong>：   <br/>
1.适合大规模的数据恢复。   <br/>
2.如果业务对数据完整性和一致性要求不高，RDB是很好的选择，因为在两次同步期间的数据有可能会丢失。 <br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">缺点</strong>：   <br/>
1.数据的完整性和一致性不高，因为RDB可能在最后一次备份时宕机了。   <br/>
2.备份时占用内存，因为Redis 在备份时会独立创建一个子进程，将数据写入到一个临时文件（此时内存中的数据是原来的两倍），最后再将临时文件替换之前的备份文件。</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.3.2 AOF</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">AOF，英文是Append Only File，即只允许追加不允许改写的文件。如前面介绍的，AOF方式是将执行过的写指令记录下来，在数据恢复时按照从前到后的顺序再将指令都执行一遍。<br/>
我们通过配置redis.conf中的appendonly yes就可以打开AOF功能。如果有写操作（如SET等），redis就会被追加到AOF文件的末尾。默认的AOF持久化策略是每秒钟fsync一次（fsync是指把缓存中的写指令记录到磁盘中），因为在这种情况下，redis仍然可以保持很好的处理性能，即使redis故障，也只会丢失最近1秒钟的数据。如果在追加日志时，恰好遇到磁盘空间满、inode满或断电等情况导致日志写入不完整，也没有关系，redis提供了redis-check-aof工具，可以用来进行日志修复。<br/>
因为采用了追加方式，如果不做任何处理的话，AOF文件会变得越来越大，为此，redis提供了AOF文件重写（rewrite）机制，即当AOF文件的大小超过所设定的阈值时，redis就会启动AOF文件的内容压缩，只保留可以恢复数据的最小指令集。<br/>
重写的流程：主进程会fork一个子进程出来进行AOF重写，这个重写过程并不是基于原有的aof文件来做的，而是有点类似于快照的方式，全量遍历内存中的数据，然后逐个序列到aof文件中。在fork子进程这个过程中，服务端仍然可以对外提供服务，那这个时候重写的aof文件的数据和redis内存数据不一致了怎么办？不用担心，这个过程中，主进程的数据更新操作，会缓存到aof_rewrite_buf中，也就是单独开辟一块缓存来存储重写期间收到的命令，当子进程重写完以后再把缓存中的数据追加到新的aof文件。当所有的数据全部追加到新的aof文件中后，把新的aof文件重命名为，此后所有的操作都会被写入新的aof文件。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">AOF 的优缺点   <br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">优点</strong>：数据的完整性和一致性更高   <br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">缺点</strong>：因为AOF记录的内容多，文件会越来越大，数据恢复也会越来越慢</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.4 分布式Redis</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="非关系型数据库NoSQL 之 memcache   &  Redis_files/redis结构.png" type="image/png" data-filename="redis结构.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.4.1 集群</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">虽然redis有持久化功能能够保障redis服务器宕机也能恢复并且只有少量的数据损失，但是由于所有数据在一台服务器上，如果这台服务器出现硬盘故障，那就是有备份也仍然不可避免数据丢失的问题。在实际生产环境中，我们不可能只使用一台redis服务器作为我们的缓存服务器，必须要<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">多台实现集群</strong>，避免出现单点故障。<br/>
<img src="非关系型数据库NoSQL 之 memcache   &  Redis_files/redis.png" type="image/png" data-filename="redis.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.4.2 主从复制</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">复制的作用是把redis的数据库复制多个副本部署在不同的服务器上，如果其中一台服务器出现故障，也能快速迁移到其他服务器上提供服务。 复制功能可以实现当一台redis服务器的数据更新后，自动将新的数据同步到其他服务器上主从复制就是我们常见的master/slave模式， 主数据库可以进行读写操作，当写操作导致数据发生变化时会自动将数据同步给从数据库。而一般情况下，从数据库是只读的，并接收主数据库同步过来的数据，一个主数据库可以有多个从数据库。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">复制方式</strong>：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">全量复制：slave服务在接收到数据库文件数据后，将其存盘并加载到内存中</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">增量复制：master继续将新的所有收集到的修改命令依次传给slave，完成同步。只要是重新连接master，一次全量复制将被自动执行。</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">从服务器会向主服务器发出SYNC指令，当主服务器接到此命令后，就会调用BGSAVE指令来创建一个子进程专门进行数据持久化工作，也就是将主服务器的数据写入RDB文件中。在数据持久化期间，主服务器将执行的写指令都缓存在内存中。<br/>
在BGSAVE指令执行完成后，主服务器会将持久化好的RDB文件发送给从服务器，从服务器接到此文件后会将其存储到磁盘上，然后再将其读取到内存中。这个动作完成后，主服务器会将这段时间缓存的写指令再以redis协议的格式发送给从服务器。<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">注意</strong>：即使有多个从服务器向主服务器发送SYNC指令，主服务器也只会执行一次BGSAVE。</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.5 redis事务</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">可以一次性执行多个命令。在一个事务中的所有命令都会序列化，按照顺序的串行执行而不会被其他命令插入，不许加塞。<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">事务命令</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">DISCARD：取消事务，放弃执行事务块内的所有命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">EXEC：执行所有事务块的命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">MULTI：标记一个事务块的开始</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">UNWATCH：取消WATCH命令对所有key的监视</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">WATCH key[key...]：监视一个（或多个）key，如果在事务执行之前这个（或这些）key被其他命令所修改，那么事务将被打断。</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.5.2 特性</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">单独的隔离操作：事务中所有命令都会按顺序执行，事务在执行的过程中不会被其他客户端发来的命令请求所打断。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">没有隔离级别的概念：事务中的命令在没有提交（EXEC）前是不会实际运行的。因为事务提交前不会被实际执行，所有也就不存在“事务内的查询要看到事务里的更新，事务外的查询不能看到”。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">不保证原子性：Redis的一个事务中，如果其中一条命令执行失败，其后的命令仍然会执行，不会回滚。</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.6 内存淘汰机制（如何保证redis中的是热点数据）</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">redis 提供 6种数据淘汰策略：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">volatile-lru：从已设置过期时间的数据集（server.db[i].expires）中挑选最近最少使用的数据淘汰</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">volatile-ttl：从已设置过期时间的数据集（server.db[i].expires）中挑选将要过期的数据淘汰</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">volatile-random：从已设置过期时间的数据集（server.db[i].expires）中任意选择数据淘汰</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key（这个是最常用的）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">allkeys-random：从数据集（server.db[i].dict）中任意选择数据淘汰</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">no-eviction：禁止驱逐数据，也就是说当内存不足以容纳新写入数据时，新写入操作会报错。这个应该没人使用吧！</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">4.0版本后增加以下两种：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">volatile-lfu：从已设置过期时间的数据集(server.db[i].expires)中挑选最不经常使用的数据淘汰</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">allkeys-lfu：当内存不足以容纳新写入数据时，在键空间中，移除最不经常使用的key</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.7 RedLock基于redis的分布式锁</h3>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.7.1 特性</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">安全特性：互斥访问，即永远只有一个 client 能拿到锁</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">避免死锁：最终 client 都可能拿到锁，不会出现死锁的情况，即使原本锁住某资源的 client crash 了或者出现了网络分区</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">容错性：只要大部分 Redis 节点存活就可以正常提供服务</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.7.2 算法</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">算法很易懂，起 5 个 master 节点，分布在不同的机房尽量保证可用性。为了获得锁，client 会进行如下操作：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">1.得到当前的时间，微秒单位</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">2.尝试顺序地在 5 个实例上申请锁，当然需要使用相同的 key 和 random value，这里一个 client 需要合理设置与 master 节点沟通的 timeout 大小，避免长时间和一个 fail 了的节点浪费时间</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">3.当 client 在大于等于 3 个 master 上成功申请到锁的时候，且它会计算申请锁消耗了多少时间，这部分消耗的时间采用获得锁的当下时间减去第一步获得的时间戳得到，如果锁的持续时长（lock validity time）比流逝的时间多的话，那么锁就真正获取到了。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">4.如果锁申请到了，那么锁真正的 lock validity time 应该是 origin（lock validity time） - 申请锁期间流逝的时间</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">5.如果 client 申请锁失败了，那么它就会在少部分申请成功锁的 master 节点上执行释放锁的操作，重置状态</li>
</ul>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%201%20memcached%0A%23%23%23%201.1%20memcached%E6%98%AF%E4%BB%80%E4%B9%88%0AMemcached%E6%98%AF**key-value%E5%9E%8B%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F**%EF%BC%8C%E5%85%B6%E4%BD%BF%E7%94%A8%E7%9B%AE%E7%9A%84%E7%BC%93%E5%AD%98%E5%B0%8F%E5%9D%97%E7%9A%84%E4%BB%BB%E6%84%8F%E6%95%B0%E6%8D%AE%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E5%AF%B9%E8%B1%A1%EF%BC%89%EF%BC%8C%E4%B8%80%E8%88%AC%E7%94%A8%E4%BA%8E%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%87%8F%E5%B0%91%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0%EF%BC%8C%E6%8F%90%E9%AB%98Web%E5%BA%94%E7%94%A8%E7%9A%84%E7%9B%B8%E5%BA%94%E9%80%9F%E5%BA%A6%E3%80%82%E7%9B%AE%E5%89%8D%E4%B8%BB%E6%B5%81%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%83%BD%E5%AE%9E%E7%8E%B0%E4%BA%86Memcached%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E3%80%82%0Amemcached%E6%98%AF%E5%BA%94%E7%94%A8%E8%BE%83%E5%B9%BF%E7%9A%84%E5%BC%80%E6%BA%90%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98%E4%BA%A7%E5%93%81%E4%B9%8B%E4%B8%80%EF%BC%8C%E5%AE%83%E6%9C%AC%E8%BA%AB%E5%85%B6%E5%AE%9E%E4%B8%8D%E6%8F%90%E4%BE%9B%E5%88%86%E5%B8%83%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%82%0A%E5%9C%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%8Cmemcached%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E5%AE%9E%E9%99%85%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E4%B8%AAmemcached%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%A0%86%E7%A7%AF%EF%BC%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%BE%83%E4%B8%BA%E7%AE%80%E5%8D%95%EF%BC%9Bcache%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%BB%E8%A6%81%E6%98%AF%E5%9C%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0%EF%BC%8C%E9%80%9A%E8%BF%87%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86%E6%9D%A5%E8%BE%BE%E5%88%B0%E5%88%86%E5%B8%83%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E7%9A%84%E7%9B%AE%E7%9A%84%E3%80%82%0A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%81%9A%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E7%90%86%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%EF%BC%8C%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%A8%E6%AF%8F%E6%AC%A1%E5%AD%98%E5%8F%96%E6%9F%90key%E7%9A%84value%E6%97%B6%EF%BC%8C%E9%80%9A%E8%BF%87%E6%9F%90%E7%A7%8D%E7%AE%97%E6%B3%95%E6%8A%8Akey%E6%98%A0%E5%B0%84%E5%88%B0%E6%9F%90%E5%8F%B0memcached%E6%9C%8D%E5%8A%A1%E5%99%A8nodeA%E4%B8%8A%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%99%E4%B8%AAkey%E6%89%80%E6%9C%89%E6%93%8D%E4%BD%9C%E9%83%BD%E5%9C%A8nodeA%E4%B8%8A%EF%BC%8C%E7%BB%93%E6%9E%84%E5%9B%BE%E5%A6%82%E4%B8%8B%EF%BC%9A%0A!%5Bd140e35c354448db4c36f9aee347995d.png%5D(en-resource%3A%2F%2Fdatabase%2F897%3A1)%0Amemcache%E9%87%87%E7%94%A8%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%BA%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E3%80%82%0A!%5Bc2eb706d7fad7f123c6f622162bbccca.png%5D(en-resource%3A%2F%2Fdatabase%2F899%3A1)%0A%E7%9B%B8%E5%AF%B9%E4%BA%8E%E4%B8%80%E8%88%AChash%EF%BC%88%E5%A6%82%E7%AE%80%E5%8D%95%E5%8F%96%E6%A8%A1%EF%BC%89%E7%9A%84%E7%AE%97%E6%B3%95%EF%BC%8C%E4%B8%80%E8%87%B4%E6%80%A7hash%E7%AE%97%E6%B3%95%E9%99%A4%E4%BA%86%E8%AE%A1%E7%AE%97key%E7%9A%84hash%E5%80%BC%E5%A4%96%EF%BC%8C%E8%BF%98%E4%BC%9A%E8%AE%A1%E7%AE%97%E6%AF%8F%E4%B8%AAserver%E5%AF%B9%E5%BA%94%E7%9A%84hash%E5%80%BC%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%E8%BF%99%E4%BA%9Bhash%E5%80%BC%E6%98%A0%E5%B0%84%E5%88%B0%E4%B8%80%E4%B8%AA%E6%9C%89%E9%99%90%E7%9A%84%E5%80%BC%E5%9F%9F%E4%B8%8A%EF%BC%88%E6%AF%94%E5%A6%820~2%5E32%EF%BC%89%E3%80%82%E9%80%9A%E8%BF%87%E5%AF%BB%E6%89%BEhash%E5%80%BC%E5%A4%A7%E4%BA%8Ehash(key)%E7%9A%84%E6%9C%80%E5%B0%8Fserver%E4%BD%9C%E4%B8%BA%E5%AD%98%E5%82%A8%E8%AF%A5key%E6%95%B0%E6%8D%AE%E7%9A%84%E7%9B%AE%E6%A0%87server%E3%80%82%E5%A6%82%E6%9E%9C%E6%89%BE%E4%B8%8D%E5%88%B0%EF%BC%8C%E5%88%99%E7%9B%B4%E6%8E%A5%E6%8A%8A%E5%85%B7%E6%9C%89%E6%9C%80%E5%B0%8Fhash%E5%80%BC%E7%9A%84server%E4%BD%9C%E4%B8%BA%E7%9B%AE%E6%A0%87server%E3%80%82%E5%90%8C%E6%97%B6%EF%BC%8C%E4%B8%80%E5%AE%9A%E7%A8%8B%E5%BA%A6%E4%B8%8A%EF%BC%8C%E8%A7%A3%E5%86%B3%E4%BA%86%E6%89%A9%E5%AE%B9%E9%97%AE%E9%A2%98%EF%BC%8C%E5%A2%9E%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%8D%95%E4%B8%AA%E8%8A%82%E7%82%B9%EF%BC%8C%E5%AF%B9%E4%BA%8E%E6%95%B4%E4%B8%AA%E9%9B%86%E7%BE%A4%E6%9D%A5%E8%AF%B4%EF%BC%8C%E4%B8%8D%E4%BC%9A%E6%9C%89%E5%A4%A7%E7%9A%84%E5%BD%B1%E5%93%8D%E3%80%82%E6%9C%80%E8%BF%91%E7%89%88%E6%9C%AC%EF%BC%8C%E5%A2%9E%E5%8A%A0%E4%BA%86%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9%E7%9A%84%E8%AE%BE%E8%AE%A1%EF%BC%8C%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%8F%90%E5%8D%87%E4%BA%86%E5%8F%AF%E7%94%A8%E6%80%A7%E3%80%82%0A%23%23%23%201.2%20%E7%89%B9%E6%80%A7%0A-%20%E5%8D%8F%E8%AE%AE%E7%AE%80%E5%8D%95%0A-%20%E5%9F%BA%E4%BA%8Elibevent%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%0A-%20%E5%86%85%E7%BD%AE%E5%86%85%E5%AD%98%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%0A-%20memcached%E4%B8%8D%E4%BA%92%E7%9B%B8%E9%80%9A%E4%BF%A1%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%0A-%20**%E4%B8%8D%E6%94%AF%E6%8C%81%E6%8C%81%E4%B9%85%E5%8C%96**%0A%0A%23%23%23%201.3%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%0Amemcache%E7%94%B1**slab%E3%80%81chunk%E5%92%8Citem**%E6%9E%84%E6%88%90%E3%80%82%0A!%5B0a9202c83b44b1f38b507b9880b75271.png%5D(en-resource%3A%2F%2Fdatabase%2F901%3A1)%0Aslab%E6%98%AF%E4%B8%80%E4%B8%AA%E5%86%85%E5%AD%98%E5%9D%97%EF%BC%8C%E5%AE%83%E6%98%AFmemcached%E4%B8%80%E6%AC%A1%E7%94%B3%E8%AF%B7%E5%86%85%E5%AD%98%E7%9A%84%E6%9C%80%E5%B0%8F%E5%8D%95%E4%BD%8D%E3%80%82%E5%9C%A8%E5%90%AF%E5%8A%A8memcached%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%80%E8%88%AC%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0-m%E6%8C%87%E5%AE%9A%E5%85%B6%E5%8F%AF%E7%94%A8%E5%86%85%E5%AD%98%EF%BC%8C%E4%BD%86%E6%98%AF%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%9C%A8%E5%90%AF%E5%8A%A8%E7%9A%84%E9%82%A3%E4%B8%80%E5%88%BB%E6%89%80%E6%9C%89%E7%9A%84%E5%86%85%E5%AD%98%E5%B0%B1%E5%85%A8%E9%83%A8%E5%88%86%E9%85%8D%E5%87%BA%E5%8E%BB%E4%BA%86%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%9C%A8%E9%9C%80%E8%A6%81%E7%9A%84%E6%97%B6%E5%80%99%E6%89%8D%E4%BC%9A%E5%8E%BB%E7%94%B3%E8%AF%B7%EF%BC%8C%E8%80%8C%E4%B8%94%E6%AF%8F%E6%AC%A1%E7%94%B3%E8%AF%B7%E4%B8%80%E5%AE%9A%E6%98%AF%E4%B8%80%E4%B8%AAslab%E3%80%82Slab%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%9B%BA%E5%AE%9A%E4%B8%BA1M%EF%BC%881048576%20Byte%EF%BC%89%EF%BC%8C%E4%B8%80%E4%B8%AAslab%E7%94%B1%E8%8B%A5%E5%B9%B2%E4%B8%AA%E5%A4%A7%E5%B0%8F%E7%9B%B8%E7%AD%89%E7%9A%84chunk%E7%BB%84%E6%88%90%E3%80%82%E6%AF%8F%E4%B8%AAchunk%E4%B8%AD%E9%83%BD%E4%BF%9D%E5%AD%98%E4%BA%86%E4%B8%80%E4%B8%AAitem%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E4%B8%80%E5%AF%B9key%E5%92%8Cvalue%E3%80%82%0A%E8%99%BD%E7%84%B6%E5%9C%A8%E5%90%8C%E4%B8%80%E4%B8%AAslab%E4%B8%ADchunk%E7%9A%84%E5%A4%A7%E5%B0%8F%E7%9B%B8%E7%AD%89%E7%9A%84%EF%BC%8C%E4%BD%86%E6%98%AF%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84slab%E4%B8%ADchunk%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%B9%B6%E4%B8%8D%E4%B8%80%E5%AE%9A%E7%9B%B8%E7%AD%89%EF%BC%8C%E5%9C%A8memcached%E4%B8%AD%E6%8C%89%E7%85%A7chunk%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%8D%E5%90%8C%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8A%8Aslab%E5%88%86%E4%B8%BA%E5%BE%88%E5%A4%9A%E7%A7%8D%E7%B1%BB%EF%BC%88class%EF%BC%89%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8Bmemcached%E6%8A%8Aslab%E5%88%86%E4%B8%BA40%E7%B1%BB%EF%BC%88class1%EF%BD%9Eclass40%EF%BC%89%EF%BC%8C%E5%9C%A8class%201%E4%B8%AD%EF%BC%8Cchunk%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%BA80%E5%AD%97%E8%8A%82%EF%BC%8C%E7%94%B1%E4%BA%8E%E4%B8%80%E4%B8%AAslab%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%98%AF%E5%9B%BA%E5%AE%9A%E7%9A%841048576%E5%AD%97%E8%8A%82%EF%BC%881M%EF%BC%89%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%9C%A8class1%E4%B8%AD%E6%9C%80%E5%A4%9A%E5%8F%AF%E4%BB%A5%E6%9C%8913107%E4%B8%AAchunk%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B8%AAslab%E8%83%BD%E5%AD%98%E6%9C%80%E5%A4%9A13107%E4%B8%AA%E5%B0%8F%E4%BA%8E80%E5%AD%97%E8%8A%82%E7%9A%84key-value%E6%95%B0%E6%8D%AE%EF%BC%89%E3%80%82%0A%0Amemcached%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E9%87%87%E5%8F%96**%E9%A2%84%E5%88%86%E9%85%8D%E3%80%81%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86**%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82%0A-%20**%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86**%E5%B0%B1%E6%98%AF%E6%88%91%E4%BB%AC%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84slab%20class%EF%BC%8C%E6%8C%89%E7%85%A7chunk%E7%9A%84%E5%A4%A7%E5%B0%8Fslab%E8%A2%AB%E5%88%86%E4%B8%BA%E5%BE%88%E5%A4%9A%E7%A7%8D%E7%B1%BB%E3%80%82%0A-%20**%E5%86%85%E5%AD%98%E9%A2%84%E5%88%86%E9%85%8D**%E8%BF%87%E7%A8%8B%E6%98%AF%EF%BC%9A%E5%90%91memcached%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AAitem%E6%97%B6%E5%80%99%EF%BC%8Cmemcached%E9%A6%96%E5%85%88%E4%BC%9A%E6%A0%B9%E6%8D%AEitem%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E6%9D%A5%E9%80%89%E6%8B%A9%E6%9C%80%E5%90%88%E9%80%82%E7%9A%84slab%20class%E3%80%82%0A%0A%23%23%202%20Redis%20%E4%BB%8B%E7%BB%8D%0A%23%23%23%202.1%20Redis%E6%98%AF%E4%BB%80%E4%B9%88%0Aredis%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E7%9A%84%E3%80%81%E4%BD%BF%E7%94%A8C%E8%AF%AD%E8%A8%80%E7%BC%96%E5%86%99%E7%9A%84%E3%80%81%E6%94%AF%E6%8C%81%E7%BD%91%E7%BB%9C%E4%BA%A4%E4%BA%92%E7%9A%84%E3%80%81%E5%8F%AF%E5%9F%BA%E4%BA%8E%E5%86%85%E5%AD%98%E4%B9%9F%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84**Key-Value%E6%95%B0%E6%8D%AE%E5%BA%93**%E3%80%82%0Aredis%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E5%86%85%E5%AD%98%E5%AD%98%E5%82%A8%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E3%80%81%E6%A8%A1%E6%8B%9F%E7%B1%BB%E4%BC%BCHttpSession%E8%BF%99%E7%A7%8D%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E7%9A%84%E5%8A%9F%E8%83%BD%E3%80%81%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF%E7%B3%BB%E7%BB%9F%C2%A0%20%C2%A0%20%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8C%E8%AE%A1%E6%95%B0%E5%99%A8%E3%80%82%0A%0A%0A%23%23%23%202.2%20Redis%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%0A-%201.%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88strings%EF%BC%89%EF%BC%9A%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%81%9A%E6%95%B0%E5%80%BC%E6%93%8D%E4%BD%9C%0A-%202.%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%97%E8%A1%A8%EF%BC%88lists%EF%BC%89%EF%BC%9A%E5%BA%95%E5%B1%82%E7%94%A8%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%8F%92%E5%85%A5%E5%88%A0%E9%99%A4%E5%BF%AB%EF%BC%8C%E5%AE%9A%E4%BD%8D%E6%85%A2%EF%BC%9B%E6%9C%89%E5%BA%8F%0A-%203.%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%9B%86%E5%90%88%EF%BC%88sets%EF%BC%89%EF%BC%9A%E6%97%A0%E5%BA%8F%EF%BC%9B%E5%8F%AF%E7%94%A8%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%8F%96%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E7%AD%89%0A-%204.%E6%9C%89%E5%BA%8F%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%9B%86%E5%90%88%EF%BC%88sorted%20sets%EF%BC%89%EF%BC%9A%E6%9C%89%E5%BA%8F%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%85%83%E7%B4%A0%E9%83%BD%E5%85%B3%E8%81%94%E4%B8%80%E4%B8%AA%E5%BA%8F%E5%8F%B7%EF%BC%9B%0A-%205.%E5%93%88%E5%B8%8C%EF%BC%88hashes%EF%BC%89%EF%BC%9A%E5%AD%98%E7%9A%84%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%80%BC%E4%B9%8B%E9%97%B4%E7%9A%84%E6%98%A0%E5%B0%84%0A%0A%E8%80%8C%E5%85%B3%E4%BA%8Ekey%EF%BC%8C%E6%9C%89%E5%87%A0%E4%B8%AA%E7%82%B9%E8%A6%81%E6%8F%90%E9%86%92%E5%A4%A7%E5%AE%B6%EF%BC%9A%0A1.key%E4%B8%8D%E8%A6%81%E5%A4%AA%E9%95%BF%EF%BC%8C%E5%B0%BD%E9%87%8F%E4%B8%8D%E8%A6%81%E8%B6%85%E8%BF%871024%E5%AD%97%E8%8A%82%EF%BC%8C%E8%BF%99%E4%B8%8D%E4%BB%85%E6%B6%88%E8%80%97%E5%86%85%E5%AD%98%EF%BC%8C%E8%80%8C%E4%B8%94%E4%BC%9A%E9%99%8D%E4%BD%8E%E6%9F%A5%E6%89%BE%E7%9A%84%E6%95%88%E7%8E%87%EF%BC%9B%0A2.key%E4%B9%9F%E4%B8%8D%E8%A6%81%E5%A4%AA%E7%9F%AD%EF%BC%8C%E5%A4%AA%E7%9F%AD%E7%9A%84%E8%AF%9D%EF%BC%8Ckey%E7%9A%84%E5%8F%AF%E8%AF%BB%E6%80%A7%E4%BC%9A%E9%99%8D%E4%BD%8E%EF%BC%9B%0A3.%E5%9C%A8%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE%E4%B8%AD%EF%BC%8Ckey%E6%9C%80%E5%A5%BD%E4%BD%BF%E7%94%A8%E7%BB%9F%E4%B8%80%E7%9A%84%E5%91%BD%E5%90%8D%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%BE%8B%E5%A6%82user%3A10000%3Apasswd%E3%80%82%0A%0A%23%23%23%202.3%20Redis%E6%8C%81%E4%B9%85%E5%8C%96%0Aredis%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%A4%E7%A7%8D%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%88%86%E5%88%AB%E6%98%AFRDB%EF%BC%88Redis%20DataBase%EF%BC%89%E5%92%8CAOF%EF%BC%88Append%20Only%20File%EF%BC%89%E3%80%82%0A-%20RDB%EF%BC%8C%E7%AE%80%E8%80%8C%E8%A8%80%E4%B9%8B%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%97%B6%E9%97%B4%E7%82%B9%EF%BC%8C%E5%B0%86redis%E5%AD%98%E5%82%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90%E5%BF%AB%E7%85%A7%E5%B9%B6%E5%AD%98%E5%82%A8%E5%88%B0%E7%A3%81%E7%9B%98%E7%AD%89%E4%BB%8B%E8%B4%A8%E4%B8%8A%EF%BC%9B%0A-%20AOF%EF%BC%8C%E5%88%99%E6%98%AF%E6%8D%A2%E4%BA%86%E4%B8%80%E4%B8%AA%E8%A7%92%E5%BA%A6%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%8C%E9%82%A3%E5%B0%B1%E6%98%AF%E5%B0%86redis%E6%89%A7%E8%A1%8C%E8%BF%87%E7%9A%84%E6%89%80%E6%9C%89%E5%86%99%E6%8C%87%E4%BB%A4%E8%AE%B0%E5%BD%95%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%9C%A8%E4%B8%8B%E6%AC%A1redis%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%E6%97%B6%EF%BC%8C%E5%8F%AA%E8%A6%81%E6%8A%8A%E8%BF%99%E4%BA%9B%E5%86%99%E6%8C%87%E4%BB%A4%E4%BB%8E%E5%89%8D%E5%88%B0%E5%90%8E%E5%86%8D%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C%E4%B8%80%E9%81%8D%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E4%BA%86%E3%80%82%0A%0A%E5%85%B6%E5%AE%9ERDB%E5%92%8CAOF%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%9C%A8%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%A6%82%E6%9E%9Credis%E9%87%8D%E5%90%AF%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%88%99%E4%BC%9A%E4%BC%98%E5%85%88%E9%87%87%E7%94%A8AOF%E6%96%B9%E5%BC%8F%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BAAOF%E6%96%B9%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E5%AE%8C%E6%95%B4%E5%BA%A6%E6%9B%B4%E9%AB%98%E3%80%82%0A%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%B2%A1%E6%9C%89%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E9%9C%80%E6%B1%82%EF%BC%8C%E4%B9%9F%E5%AE%8C%E5%85%A8%E5%8F%AF%E4%BB%A5%E5%85%B3%E9%97%ADRDB%E5%92%8CAOF%E6%96%B9%E5%BC%8F%EF%BC%8C%E8%BF%99%E6%A0%B7%E7%9A%84%E8%AF%9D%EF%BC%8Credis%E5%B0%86%E5%8F%98%E6%88%90%E4%B8%80%E4%B8%AA%E7%BA%AF%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E5%B0%B1%E5%83%8Fmemcache%E4%B8%80%E6%A0%B7%E3%80%82%0A%23%23%23%23%202.3.1%20RDB%0A%0ARDB%E6%96%B9%E5%BC%8F%EF%BC%9Aredis%20data%20base%20%2C%20%E7%94%A8%E4%BA%8E%E5%81%9A%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BF%AB%E7%85%A7%EF%BC%8C%E6%AD%A4%E8%BF%87%E7%A8%8B%E4%BC%9Afork%E4%B8%80%E4%B8%AA%E5%AD%90%E8%BF%9B%E7%A8%8B%E6%9D%A5%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%8D%E7%94%A8%E6%8B%85%E5%BF%83%E4%BC%9A%E5%BD%B1%E5%93%8D%E5%BD%93%E5%89%8D%E7%9A%84%E8%BF%9B%E7%A8%8B%E3%80%82%C2%A0%20%C2%A0%20%0ARDB%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6%E6%9C%89%E4%BB%A5%E4%B8%8B%E5%87%A0%E7%A7%8D%EF%BC%9A%C2%A0%20%C2%A0%20%0A-%201.%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E5%BF%AB%E7%85%A7%C2%A0%20%C2%A0%20%0A-%202.%E7%94%A8%E6%88%B7%E6%89%A7%E8%A1%8CSAVE%EF%BC%88%E9%98%BB%E5%A1%9E%EF%BC%8C%20%E5%8F%AA%E7%AE%A1%E4%BF%9D%E5%AD%98%E5%BF%AB%E7%85%A7%EF%BC%8C%E5%85%B6%E4%BB%96%E7%9A%84%E7%AD%89%E5%BE%85%EF%BC%89%E6%88%96%E8%80%85BGSAVE%EF%BC%88%E5%BC%82%E6%AD%A5%EF%BC%89%E5%91%BD%E4%BB%A4%C2%A0%20%C2%A0%20%0A-%203.%E6%89%A7%E8%A1%8CFLUSHALL%E5%91%BD%E4%BB%A4%C2%A0%20%C2%A0%20%0A-%204.%E6%89%A7%E8%A1%8C%E5%A4%8D%E5%88%B6(replication)%E6%97%B6%C2%A0%20%C2%A0%20%0A%0ARDB%20%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%C2%A0%20%C2%A0%20%0A**%E4%BC%98%E7%82%B9**%EF%BC%9A%C2%A0%20%C2%A0%0A1.%E9%80%82%E5%90%88%E5%A4%A7%E8%A7%84%E6%A8%A1%E7%9A%84%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E3%80%82%C2%A0%20%C2%A0%20%0A2.%E5%A6%82%E6%9E%9C%E4%B8%9A%E5%8A%A1%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7%E8%A6%81%E6%B1%82%E4%B8%8D%E9%AB%98%EF%BC%8CRDB%E6%98%AF%E5%BE%88%E5%A5%BD%E7%9A%84%E9%80%89%E6%8B%A9%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%9C%A8%E4%B8%A4%E6%AC%A1%E5%90%8C%E6%AD%A5%E6%9C%9F%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E4%B8%A2%E5%A4%B1%E3%80%82%C2%A0%20%0A**%E7%BC%BA%E7%82%B9**%EF%BC%9A%C2%A0%20%C2%A0%20%0A1.%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7%E4%B8%8D%E9%AB%98%EF%BC%8C%E5%9B%A0%E4%B8%BARDB%E5%8F%AF%E8%83%BD%E5%9C%A8%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E5%A4%87%E4%BB%BD%E6%97%B6%E5%AE%95%E6%9C%BA%E4%BA%86%E3%80%82%C2%A0%20%C2%A0%20%0A2.%E5%A4%87%E4%BB%BD%E6%97%B6%E5%8D%A0%E7%94%A8%E5%86%85%E5%AD%98%EF%BC%8C%E5%9B%A0%E4%B8%BARedis%20%E5%9C%A8%E5%A4%87%E4%BB%BD%E6%97%B6%E4%BC%9A%E7%8B%AC%E7%AB%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%90%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%B0%86%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E5%88%B0%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%EF%BC%88%E6%AD%A4%E6%97%B6%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%98%AF%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%B8%A4%E5%80%8D%EF%BC%89%EF%BC%8C%E6%9C%80%E5%90%8E%E5%86%8D%E5%B0%86%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E6%9B%BF%E6%8D%A2%E4%B9%8B%E5%89%8D%E7%9A%84%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E3%80%82%0A%0A%0A%23%23%23%23%202.3.2%20AOF%0AAOF%EF%BC%8C%E8%8B%B1%E6%96%87%E6%98%AFAppend%20Only%20File%EF%BC%8C%E5%8D%B3%E5%8F%AA%E5%85%81%E8%AE%B8%E8%BF%BD%E5%8A%A0%E4%B8%8D%E5%85%81%E8%AE%B8%E6%94%B9%E5%86%99%E7%9A%84%E6%96%87%E4%BB%B6%E3%80%82%E5%A6%82%E5%89%8D%E9%9D%A2%E4%BB%8B%E7%BB%8D%E7%9A%84%EF%BC%8CAOF%E6%96%B9%E5%BC%8F%E6%98%AF%E5%B0%86%E6%89%A7%E8%A1%8C%E8%BF%87%E7%9A%84%E5%86%99%E6%8C%87%E4%BB%A4%E8%AE%B0%E5%BD%95%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%9C%A8%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E6%97%B6%E6%8C%89%E7%85%A7%E4%BB%8E%E5%89%8D%E5%88%B0%E5%90%8E%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%86%8D%E5%B0%86%E6%8C%87%E4%BB%A4%E9%83%BD%E6%89%A7%E8%A1%8C%E4%B8%80%E9%81%8D%E3%80%82%0A%E6%88%91%E4%BB%AC%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AEredis.conf%E4%B8%AD%E7%9A%84appendonly%20yes%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80AOF%E5%8A%9F%E8%83%BD%E3%80%82%E5%A6%82%E6%9E%9C%E6%9C%89%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A6%82SET%E7%AD%89%EF%BC%89%EF%BC%8Credis%E5%B0%B1%E4%BC%9A%E8%A2%AB%E8%BF%BD%E5%8A%A0%E5%88%B0AOF%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%AB%E5%B0%BE%E3%80%82%E9%BB%98%E8%AE%A4%E7%9A%84AOF%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5%E6%98%AF%E6%AF%8F%E7%A7%92%E9%92%9Ffsync%E4%B8%80%E6%AC%A1%EF%BC%88fsync%E6%98%AF%E6%8C%87%E6%8A%8A%E7%BC%93%E5%AD%98%E4%B8%AD%E7%9A%84%E5%86%99%E6%8C%87%E4%BB%A4%E8%AE%B0%E5%BD%95%E5%88%B0%E7%A3%81%E7%9B%98%E4%B8%AD%EF%BC%89%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%9C%A8%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8Credis%E4%BB%8D%E7%84%B6%E5%8F%AF%E4%BB%A5%E4%BF%9D%E6%8C%81%E5%BE%88%E5%A5%BD%E7%9A%84%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD%EF%BC%8C%E5%8D%B3%E4%BD%BFredis%E6%95%85%E9%9A%9C%EF%BC%8C%E4%B9%9F%E5%8F%AA%E4%BC%9A%E4%B8%A2%E5%A4%B1%E6%9C%80%E8%BF%911%E7%A7%92%E9%92%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%E5%A6%82%E6%9E%9C%E5%9C%A8%E8%BF%BD%E5%8A%A0%E6%97%A5%E5%BF%97%E6%97%B6%EF%BC%8C%E6%81%B0%E5%A5%BD%E9%81%87%E5%88%B0%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%BB%A1%E3%80%81inode%E6%BB%A1%E6%88%96%E6%96%AD%E7%94%B5%E7%AD%89%E6%83%85%E5%86%B5%E5%AF%BC%E8%87%B4%E6%97%A5%E5%BF%97%E5%86%99%E5%85%A5%E4%B8%8D%E5%AE%8C%E6%95%B4%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%9C%89%E5%85%B3%E7%B3%BB%EF%BC%8Credis%E6%8F%90%E4%BE%9B%E4%BA%86redis-check-aof%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E4%BF%AE%E5%A4%8D%E3%80%82%0A%E5%9B%A0%E4%B8%BA%E9%87%87%E7%94%A8%E4%BA%86%E8%BF%BD%E5%8A%A0%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%81%9A%E4%BB%BB%E4%BD%95%E5%A4%84%E7%90%86%E7%9A%84%E8%AF%9D%EF%BC%8CAOF%E6%96%87%E4%BB%B6%E4%BC%9A%E5%8F%98%E5%BE%97%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%A7%EF%BC%8C%E4%B8%BA%E6%AD%A4%EF%BC%8Credis%E6%8F%90%E4%BE%9B%E4%BA%86AOF%E6%96%87%E4%BB%B6%E9%87%8D%E5%86%99%EF%BC%88rewrite%EF%BC%89%E6%9C%BA%E5%88%B6%EF%BC%8C%E5%8D%B3%E5%BD%93AOF%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F%E8%B6%85%E8%BF%87%E6%89%80%E8%AE%BE%E5%AE%9A%E7%9A%84%E9%98%88%E5%80%BC%E6%97%B6%EF%BC%8Credis%E5%B0%B1%E4%BC%9A%E5%90%AF%E5%8A%A8AOF%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E5%8E%8B%E7%BC%A9%EF%BC%8C%E5%8F%AA%E4%BF%9D%E7%95%99%E5%8F%AF%E4%BB%A5%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%80%E5%B0%8F%E6%8C%87%E4%BB%A4%E9%9B%86%E3%80%82%0A%E9%87%8D%E5%86%99%E7%9A%84%E6%B5%81%E7%A8%8B%EF%BC%9A%E4%B8%BB%E8%BF%9B%E7%A8%8B%E4%BC%9Afork%E4%B8%80%E4%B8%AA%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%87%BA%E6%9D%A5%E8%BF%9B%E8%A1%8CAOF%E9%87%8D%E5%86%99%EF%BC%8C%E8%BF%99%E4%B8%AA%E9%87%8D%E5%86%99%E8%BF%87%E7%A8%8B%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%9F%BA%E4%BA%8E%E5%8E%9F%E6%9C%89%E7%9A%84aof%E6%96%87%E4%BB%B6%E6%9D%A5%E5%81%9A%E7%9A%84%EF%BC%8C%E8%80%8C%E6%98%AF%E6%9C%89%E7%82%B9%E7%B1%BB%E4%BC%BC%E4%BA%8E%E5%BF%AB%E7%85%A7%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%85%A8%E9%87%8F%E9%81%8D%E5%8E%86%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%90%E4%B8%AA%E5%BA%8F%E5%88%97%E5%88%B0aof%E6%96%87%E4%BB%B6%E4%B8%AD%E3%80%82%E5%9C%A8fork%E5%AD%90%E8%BF%9B%E7%A8%8B%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BB%8D%E7%84%B6%E5%8F%AF%E4%BB%A5%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%EF%BC%8C%E9%82%A3%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99%E9%87%8D%E5%86%99%E7%9A%84aof%E6%96%87%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%92%8Credis%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%80%E8%87%B4%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F%E4%B8%8D%E7%94%A8%E6%8B%85%E5%BF%83%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E4%B8%BB%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C%EF%BC%8C%E4%BC%9A%E7%BC%93%E5%AD%98%E5%88%B0aof_rewrite_buf%E4%B8%AD%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%8D%95%E7%8B%AC%E5%BC%80%E8%BE%9F%E4%B8%80%E5%9D%97%E7%BC%93%E5%AD%98%E6%9D%A5%E5%AD%98%E5%82%A8%E9%87%8D%E5%86%99%E6%9C%9F%E9%97%B4%E6%94%B6%E5%88%B0%E7%9A%84%E5%91%BD%E4%BB%A4%EF%BC%8C%E5%BD%93%E5%AD%90%E8%BF%9B%E7%A8%8B%E9%87%8D%E5%86%99%E5%AE%8C%E4%BB%A5%E5%90%8E%E5%86%8D%E6%8A%8A%E7%BC%93%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%BD%E5%8A%A0%E5%88%B0%E6%96%B0%E7%9A%84aof%E6%96%87%E4%BB%B6%E3%80%82%E5%BD%93%E6%89%80%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%A8%E9%83%A8%E8%BF%BD%E5%8A%A0%E5%88%B0%E6%96%B0%E7%9A%84aof%E6%96%87%E4%BB%B6%E4%B8%AD%E5%90%8E%EF%BC%8C%E6%8A%8A%E6%96%B0%E7%9A%84aof%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D%E4%B8%BA%EF%BC%8C%E6%AD%A4%E5%90%8E%E6%89%80%E6%9C%89%E7%9A%84%E6%93%8D%E4%BD%9C%E9%83%BD%E4%BC%9A%E8%A2%AB%E5%86%99%E5%85%A5%E6%96%B0%E7%9A%84aof%E6%96%87%E4%BB%B6%E3%80%82%0A%0AAOF%20%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%C2%A0%20%C2%A0%20%0A**%E4%BC%98%E7%82%B9**%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7%E6%9B%B4%E9%AB%98%C2%A0%20%C2%A0%20%0A**%E7%BC%BA%E7%82%B9**%EF%BC%9A%E5%9B%A0%E4%B8%BAAOF%E8%AE%B0%E5%BD%95%E7%9A%84%E5%86%85%E5%AE%B9%E5%A4%9A%EF%BC%8C%E6%96%87%E4%BB%B6%E4%BC%9A%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%A7%EF%BC%8C%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D%E4%B9%9F%E4%BC%9A%E8%B6%8A%E6%9D%A5%E8%B6%8A%E6%85%A2%0A%0A%0A%23%23%23%202.4%20%E5%88%86%E5%B8%83%E5%BC%8FRedis%0A!%5B6e59a97bdc1934a2802c67c9f0d4b0ca.png%5D(en-resource%3A%2F%2Fdatabase%2F903%3A1)%0A%23%23%23%23%202.4.1%20%E9%9B%86%E7%BE%A4%0A%E8%99%BD%E7%84%B6redis%E6%9C%89%E6%8C%81%E4%B9%85%E5%8C%96%E5%8A%9F%E8%83%BD%E8%83%BD%E5%A4%9F%E4%BF%9D%E9%9A%9Credis%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%95%E6%9C%BA%E4%B9%9F%E8%83%BD%E6%81%A2%E5%A4%8D%E5%B9%B6%E4%B8%94%E5%8F%AA%E6%9C%89%E5%B0%91%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8D%9F%E5%A4%B1%EF%BC%8C%E4%BD%86%E6%98%AF%E7%94%B1%E4%BA%8E%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%9C%A8%E4%B8%80%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%BA%E7%8E%B0%E7%A1%AC%E7%9B%98%E6%95%85%E9%9A%9C%EF%BC%8C%E9%82%A3%E5%B0%B1%E6%98%AF%E6%9C%89%E5%A4%87%E4%BB%BD%E4%B9%9F%E4%BB%8D%E7%84%B6%E4%B8%8D%E5%8F%AF%E9%81%BF%E5%85%8D%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82%E5%9C%A8%E5%AE%9E%E9%99%85%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8D%E5%8F%AF%E8%83%BD%E5%8F%AA%E4%BD%BF%E7%94%A8%E4%B8%80%E5%8F%B0redis%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%9C%E4%B8%BA%E6%88%91%E4%BB%AC%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%BF%85%E9%A1%BB%E8%A6%81**%E5%A4%9A%E5%8F%B0%E5%AE%9E%E7%8E%B0%E9%9B%86%E7%BE%A4**%EF%BC%8C%E9%81%BF%E5%85%8D%E5%87%BA%E7%8E%B0%E5%8D%95%E7%82%B9%E6%95%85%E9%9A%9C%E3%80%82%0A!%5B4f386e018387f7756812fd6003e965e3.png%5D(en-resource%3A%2F%2Fdatabase%2F905%3A1)%0A%0A%23%23%23%23%202.4.2%20%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%0A%E5%A4%8D%E5%88%B6%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E6%8A%8Aredis%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E5%88%B6%E5%A4%9A%E4%B8%AA%E5%89%AF%E6%9C%AC%E9%83%A8%E7%BD%B2%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%85%B6%E4%B8%AD%E4%B8%80%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%BA%E7%8E%B0%E6%95%85%E9%9A%9C%EF%BC%8C%E4%B9%9F%E8%83%BD%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB%E5%88%B0%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E3%80%82%20%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E5%BD%93%E4%B8%80%E5%8F%B0redis%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E5%90%8E%EF%BC%8C%E8%87%AA%E5%8A%A8%E5%B0%86%E6%96%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%88%B0%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%B0%B1%E6%98%AF%E6%88%91%E4%BB%AC%E5%B8%B8%E8%A7%81%E7%9A%84master%2Fslave%E6%A8%A1%E5%BC%8F%EF%BC%8C%20%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%BD%93%E5%86%99%E6%93%8D%E4%BD%9C%E5%AF%BC%E8%87%B4%E6%95%B0%E6%8D%AE%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96%E6%97%B6%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%B0%86%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E7%BB%99%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%82%E8%80%8C%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%8F%AA%E8%AF%BB%E7%9A%84%EF%BC%8C%E5%B9%B6%E6%8E%A5%E6%94%B6%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5%E8%BF%87%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%A4%9A%E4%B8%AA%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%82%0A%0A**%E5%A4%8D%E5%88%B6%E6%96%B9%E5%BC%8F**%EF%BC%9A%0A-%20%E5%85%A8%E9%87%8F%E5%A4%8D%E5%88%B6%EF%BC%9Aslave%E6%9C%8D%E5%8A%A1%E5%9C%A8%E6%8E%A5%E6%94%B6%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE%E5%90%8E%EF%BC%8C%E5%B0%86%E5%85%B6%E5%AD%98%E7%9B%98%E5%B9%B6%E5%8A%A0%E8%BD%BD%E5%88%B0%E5%86%85%E5%AD%98%E4%B8%AD%C2%A0%20%C2%A0%20%0A-%20%E5%A2%9E%E9%87%8F%E5%A4%8D%E5%88%B6%EF%BC%9Amaster%E7%BB%A7%E7%BB%AD%E5%B0%86%E6%96%B0%E7%9A%84%E6%89%80%E6%9C%89%E6%94%B6%E9%9B%86%E5%88%B0%E7%9A%84%E4%BF%AE%E6%94%B9%E5%91%BD%E4%BB%A4%E4%BE%9D%E6%AC%A1%E4%BC%A0%E7%BB%99slave%EF%BC%8C%E5%AE%8C%E6%88%90%E5%90%8C%E6%AD%A5%E3%80%82%E5%8F%AA%E8%A6%81%E6%98%AF%E9%87%8D%E6%96%B0%E8%BF%9E%E6%8E%A5master%EF%BC%8C%E4%B8%80%E6%AC%A1%E5%85%A8%E9%87%8F%E5%A4%8D%E5%88%B6%E5%B0%86%E8%A2%AB%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E3%80%82%0A%0A%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%9A%E5%90%91%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E5%87%BASYNC%E6%8C%87%E4%BB%A4%EF%BC%8C%E5%BD%93%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E5%88%B0%E6%AD%A4%E5%91%BD%E4%BB%A4%E5%90%8E%EF%BC%8C%E5%B0%B1%E4%BC%9A%E8%B0%83%E7%94%A8BGSAVE%E6%8C%87%E4%BB%A4%E6%9D%A5%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%90%E8%BF%9B%E7%A8%8B%E4%B8%93%E9%97%A8%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E5%B7%A5%E4%BD%9C%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%B0%86%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5RDB%E6%96%87%E4%BB%B6%E4%B8%AD%E3%80%82%E5%9C%A8%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%9F%E9%97%B4%EF%BC%8C%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B0%86%E6%89%A7%E8%A1%8C%E7%9A%84%E5%86%99%E6%8C%87%E4%BB%A4%E9%83%BD%E7%BC%93%E5%AD%98%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E3%80%82%0A%E5%9C%A8BGSAVE%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%9A%E5%B0%86%E6%8C%81%E4%B9%85%E5%8C%96%E5%A5%BD%E7%9A%84RDB%E6%96%87%E4%BB%B6%E5%8F%91%E9%80%81%E7%BB%99%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E5%88%B0%E6%AD%A4%E6%96%87%E4%BB%B6%E5%90%8E%E4%BC%9A%E5%B0%86%E5%85%B6%E5%AD%98%E5%82%A8%E5%88%B0%E7%A3%81%E7%9B%98%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E5%B0%86%E5%85%B6%E8%AF%BB%E5%8F%96%E5%88%B0%E5%86%85%E5%AD%98%E4%B8%AD%E3%80%82%E8%BF%99%E4%B8%AA%E5%8A%A8%E4%BD%9C%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%9A%E5%B0%86%E8%BF%99%E6%AE%B5%E6%97%B6%E9%97%B4%E7%BC%93%E5%AD%98%E7%9A%84%E5%86%99%E6%8C%87%E4%BB%A4%E5%86%8D%E4%BB%A5redis%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8F%91%E9%80%81%E7%BB%99%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82%0A**%E6%B3%A8%E6%84%8F**%EF%BC%9A%E5%8D%B3%E4%BD%BF%E6%9C%89%E5%A4%9A%E4%B8%AA%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%91%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81SYNC%E6%8C%87%E4%BB%A4%EF%BC%8C%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%9F%E5%8F%AA%E4%BC%9A%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1BGSAVE%E3%80%82%0A%0A%23%23%23%202.5%20redis%E4%BA%8B%E5%8A%A1%0A%E5%8F%AF%E4%BB%A5%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%A7%E8%A1%8C%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4%E3%80%82%E5%9C%A8%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%91%BD%E4%BB%A4%E9%83%BD%E4%BC%9A%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%8C%E6%8C%89%E7%85%A7%E9%A1%BA%E5%BA%8F%E7%9A%84%E4%B8%B2%E8%A1%8C%E6%89%A7%E8%A1%8C%E8%80%8C%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4%E6%8F%92%E5%85%A5%EF%BC%8C%E4%B8%8D%E8%AE%B8%E5%8A%A0%E5%A1%9E%E3%80%82%0A**%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4**%0A-%20DISCARD%EF%BC%9A%E5%8F%96%E6%B6%88%E4%BA%8B%E5%8A%A1%EF%BC%8C%E6%94%BE%E5%BC%83%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1%E5%9D%97%E5%86%85%E7%9A%84%E6%89%80%E6%9C%89%E5%91%BD%E4%BB%A4%0A-%20EXEC%EF%BC%9A%E6%89%A7%E8%A1%8C%E6%89%80%E6%9C%89%E4%BA%8B%E5%8A%A1%E5%9D%97%E7%9A%84%E5%91%BD%E4%BB%A4%0A-%20MULTI%EF%BC%9A%E6%A0%87%E8%AE%B0%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E5%9D%97%E7%9A%84%E5%BC%80%E5%A7%8B%0A-%20UNWATCH%EF%BC%9A%E5%8F%96%E6%B6%88WATCH%E5%91%BD%E4%BB%A4%E5%AF%B9%E6%89%80%E6%9C%89key%E7%9A%84%E7%9B%91%E8%A7%86%0A-%20WATCH%20key%5Bkey...%5D%EF%BC%9A%E7%9B%91%E8%A7%86%E4%B8%80%E4%B8%AA%EF%BC%88%E6%88%96%E5%A4%9A%E4%B8%AA%EF%BC%89key%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%9C%A8%E4%BA%8B%E5%8A%A1%E6%89%A7%E8%A1%8C%E4%B9%8B%E5%89%8D%E8%BF%99%E4%B8%AA%EF%BC%88%E6%88%96%E8%BF%99%E4%BA%9B%EF%BC%89key%E8%A2%AB%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4%E6%89%80%E4%BF%AE%E6%94%B9%EF%BC%8C%E9%82%A3%E4%B9%88%E4%BA%8B%E5%8A%A1%E5%B0%86%E8%A2%AB%E6%89%93%E6%96%AD%E3%80%82%0A%0A%23%23%23%23%202.5.2%20%E7%89%B9%E6%80%A7%0A-%20%E5%8D%95%E7%8B%AC%E7%9A%84%E9%9A%94%E7%A6%BB%E6%93%8D%E4%BD%9C%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%B8%AD%E6%89%80%E6%9C%89%E5%91%BD%E4%BB%A4%E9%83%BD%E4%BC%9A%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%9C%A8%E6%89%A7%E8%A1%8C%E7%9A%84%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%85%B6%E4%BB%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E6%9D%A5%E7%9A%84%E5%91%BD%E4%BB%A4%E8%AF%B7%E6%B1%82%E6%89%80%E6%89%93%E6%96%AD%E3%80%82%0A-%20%E6%B2%A1%E6%9C%89%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4%E5%9C%A8%E6%B2%A1%E6%9C%89%E6%8F%90%E4%BA%A4%EF%BC%88EXEC%EF%BC%89%E5%89%8D%E6%98%AF%E4%B8%8D%E4%BC%9A%E5%AE%9E%E9%99%85%E8%BF%90%E8%A1%8C%E7%9A%84%E3%80%82%E5%9B%A0%E4%B8%BA%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E5%89%8D%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%AE%9E%E9%99%85%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%89%80%E6%9C%89%E4%B9%9F%E5%B0%B1%E4%B8%8D%E5%AD%98%E5%9C%A8%E2%80%9C%E4%BA%8B%E5%8A%A1%E5%86%85%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%A6%81%E7%9C%8B%E5%88%B0%E4%BA%8B%E5%8A%A1%E9%87%8C%E7%9A%84%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%A4%96%E7%9A%84%E6%9F%A5%E8%AF%A2%E4%B8%8D%E8%83%BD%E7%9C%8B%E5%88%B0%E2%80%9D%E3%80%82%0A-%20%E4%B8%8D%E4%BF%9D%E8%AF%81%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%9ARedis%E7%9A%84%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%85%B6%E4%B8%AD%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%85%B6%E5%90%8E%E7%9A%84%E5%91%BD%E4%BB%A4%E4%BB%8D%E7%84%B6%E4%BC%9A%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%9B%9E%E6%BB%9A%E3%80%82%0A%0A%23%23%23%202.6%20%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E6%9C%BA%E5%88%B6%EF%BC%88%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81redis%E4%B8%AD%E7%9A%84%E6%98%AF%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE%EF%BC%89%0Aredis%20%E6%8F%90%E4%BE%9B%206%E7%A7%8D%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%EF%BC%9A%0A-%20volatile-lru%EF%BC%9A%E4%BB%8E%E5%B7%B2%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%EF%BC%88server.db%5Bi%5D.expires%EF%BC%89%E4%B8%AD%E6%8C%91%E9%80%89%E6%9C%80%E8%BF%91%E6%9C%80%E5%B0%91%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%0A-%20volatile-ttl%EF%BC%9A%E4%BB%8E%E5%B7%B2%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%EF%BC%88server.db%5Bi%5D.expires%EF%BC%89%E4%B8%AD%E6%8C%91%E9%80%89%E5%B0%86%E8%A6%81%E8%BF%87%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%0A-%20volatile-random%EF%BC%9A%E4%BB%8E%E5%B7%B2%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%EF%BC%88server.db%5Bi%5D.expires%EF%BC%89%E4%B8%AD%E4%BB%BB%E6%84%8F%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%0A-%20allkeys-lru%EF%BC%9A%E5%BD%93%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E4%BB%A5%E5%AE%B9%E7%BA%B3%E6%96%B0%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E5%9C%A8%E9%94%AE%E7%A9%BA%E9%97%B4%E4%B8%AD%EF%BC%8C%E7%A7%BB%E9%99%A4%E6%9C%80%E8%BF%91%E6%9C%80%E5%B0%91%E4%BD%BF%E7%94%A8%E7%9A%84key%EF%BC%88%E8%BF%99%E4%B8%AA%E6%98%AF%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%EF%BC%89%0A-%20allkeys-random%EF%BC%9A%E4%BB%8E%E6%95%B0%E6%8D%AE%E9%9B%86%EF%BC%88server.db%5Bi%5D.dict%EF%BC%89%E4%B8%AD%E4%BB%BB%E6%84%8F%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%0A-%20no-eviction%EF%BC%9A%E7%A6%81%E6%AD%A2%E9%A9%B1%E9%80%90%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E5%BD%93%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E4%BB%A5%E5%AE%B9%E7%BA%B3%E6%96%B0%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E6%96%B0%E5%86%99%E5%85%A5%E6%93%8D%E4%BD%9C%E4%BC%9A%E6%8A%A5%E9%94%99%E3%80%82%E8%BF%99%E4%B8%AA%E5%BA%94%E8%AF%A5%E6%B2%A1%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%90%A7%EF%BC%81%0A%0A4.0%E7%89%88%E6%9C%AC%E5%90%8E%E5%A2%9E%E5%8A%A0%E4%BB%A5%E4%B8%8B%E4%B8%A4%E7%A7%8D%EF%BC%9A%0A-%20volatile-lfu%EF%BC%9A%E4%BB%8E%E5%B7%B2%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86(server.db%5Bi%5D.expires)%E4%B8%AD%E6%8C%91%E9%80%89%E6%9C%80%E4%B8%8D%E7%BB%8F%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%0A-%20allkeys-lfu%EF%BC%9A%E5%BD%93%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E4%BB%A5%E5%AE%B9%E7%BA%B3%E6%96%B0%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E5%9C%A8%E9%94%AE%E7%A9%BA%E9%97%B4%E4%B8%AD%EF%BC%8C%E7%A7%BB%E9%99%A4%E6%9C%80%E4%B8%8D%E7%BB%8F%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%9A%84key%0A%0A%23%23%23%202.7%20RedLock%E5%9F%BA%E4%BA%8Eredis%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%0A%23%23%23%23%202.7.1%20%E7%89%B9%E6%80%A7%0A-%20%E5%AE%89%E5%85%A8%E7%89%B9%E6%80%A7%EF%BC%9A%E4%BA%92%E6%96%A5%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%8D%B3%E6%B0%B8%E8%BF%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%20client%20%E8%83%BD%E6%8B%BF%E5%88%B0%E9%94%81%0A-%20%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81%EF%BC%9A%E6%9C%80%E7%BB%88%20client%20%E9%83%BD%E5%8F%AF%E8%83%BD%E6%8B%BF%E5%88%B0%E9%94%81%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%AD%BB%E9%94%81%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%8E%9F%E6%9C%AC%E9%94%81%E4%BD%8F%E6%9F%90%E8%B5%84%E6%BA%90%E7%9A%84%20client%20crash%20%E4%BA%86%E6%88%96%E8%80%85%E5%87%BA%E7%8E%B0%E4%BA%86%E7%BD%91%E7%BB%9C%E5%88%86%E5%8C%BA%0A-%20%E5%AE%B9%E9%94%99%E6%80%A7%EF%BC%9A%E5%8F%AA%E8%A6%81%E5%A4%A7%E9%83%A8%E5%88%86%20Redis%20%E8%8A%82%E7%82%B9%E5%AD%98%E6%B4%BB%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%0A%0A%23%23%23%23%202.7.2%20%E7%AE%97%E6%B3%95%0A%E7%AE%97%E6%B3%95%E5%BE%88%E6%98%93%E6%87%82%EF%BC%8C%E8%B5%B7%205%20%E4%B8%AA%20master%20%E8%8A%82%E7%82%B9%EF%BC%8C%E5%88%86%E5%B8%83%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%9C%BA%E6%88%BF%E5%B0%BD%E9%87%8F%E4%BF%9D%E8%AF%81%E5%8F%AF%E7%94%A8%E6%80%A7%E3%80%82%E4%B8%BA%E4%BA%86%E8%8E%B7%E5%BE%97%E9%94%81%EF%BC%8Cclient%20%E4%BC%9A%E8%BF%9B%E8%A1%8C%E5%A6%82%E4%B8%8B%E6%93%8D%E4%BD%9C%EF%BC%9A%0A-%201.%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E5%BE%AE%E7%A7%92%E5%8D%95%E4%BD%8D%0A-%202.%E5%B0%9D%E8%AF%95%E9%A1%BA%E5%BA%8F%E5%9C%B0%E5%9C%A8%205%20%E4%B8%AA%E5%AE%9E%E4%BE%8B%E4%B8%8A%E7%94%B3%E8%AF%B7%E9%94%81%EF%BC%8C%E5%BD%93%E7%84%B6%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%90%8C%E7%9A%84%20key%20%E5%92%8C%20random%20value%EF%BC%8C%E8%BF%99%E9%87%8C%E4%B8%80%E4%B8%AA%20client%20%E9%9C%80%E8%A6%81%E5%90%88%E7%90%86%E8%AE%BE%E7%BD%AE%E4%B8%8E%20master%20%E8%8A%82%E7%82%B9%E6%B2%9F%E9%80%9A%E7%9A%84%20timeout%20%E5%A4%A7%E5%B0%8F%EF%BC%8C%E9%81%BF%E5%85%8D%E9%95%BF%E6%97%B6%E9%97%B4%E5%92%8C%E4%B8%80%E4%B8%AA%20fail%20%E4%BA%86%E7%9A%84%E8%8A%82%E7%82%B9%E6%B5%AA%E8%B4%B9%E6%97%B6%E9%97%B4%0A-%203.%E5%BD%93%20client%20%E5%9C%A8%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E%203%20%E4%B8%AA%20master%20%E4%B8%8A%E6%88%90%E5%8A%9F%E7%94%B3%E8%AF%B7%E5%88%B0%E9%94%81%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%B8%94%E5%AE%83%E4%BC%9A%E8%AE%A1%E7%AE%97%E7%94%B3%E8%AF%B7%E9%94%81%E6%B6%88%E8%80%97%E4%BA%86%E5%A4%9A%E5%B0%91%E6%97%B6%E9%97%B4%EF%BC%8C%E8%BF%99%E9%83%A8%E5%88%86%E6%B6%88%E8%80%97%E7%9A%84%E6%97%B6%E9%97%B4%E9%87%87%E7%94%A8%E8%8E%B7%E5%BE%97%E9%94%81%E7%9A%84%E5%BD%93%E4%B8%8B%E6%97%B6%E9%97%B4%E5%87%8F%E5%8E%BB%E7%AC%AC%E4%B8%80%E6%AD%A5%E8%8E%B7%E5%BE%97%E7%9A%84%E6%97%B6%E9%97%B4%E6%88%B3%E5%BE%97%E5%88%B0%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%94%81%E7%9A%84%E6%8C%81%E7%BB%AD%E6%97%B6%E9%95%BF%EF%BC%88lock%20validity%20time%EF%BC%89%E6%AF%94%E6%B5%81%E9%80%9D%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%9A%E7%9A%84%E8%AF%9D%EF%BC%8C%E9%82%A3%E4%B9%88%E9%94%81%E5%B0%B1%E7%9C%9F%E6%AD%A3%E8%8E%B7%E5%8F%96%E5%88%B0%E4%BA%86%E3%80%82%0A-%204.%E5%A6%82%E6%9E%9C%E9%94%81%E7%94%B3%E8%AF%B7%E5%88%B0%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E9%94%81%E7%9C%9F%E6%AD%A3%E7%9A%84%20lock%20validity%20time%20%E5%BA%94%E8%AF%A5%E6%98%AF%20origin%EF%BC%88lock%20validity%20time%EF%BC%89%20-%20%E7%94%B3%E8%AF%B7%E9%94%81%E6%9C%9F%E9%97%B4%E6%B5%81%E9%80%9D%E7%9A%84%E6%97%B6%E9%97%B4%0A-%205.%E5%A6%82%E6%9E%9C%20client%20%E7%94%B3%E8%AF%B7%E9%94%81%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E5%AE%83%E5%B0%B1%E4%BC%9A%E5%9C%A8%E5%B0%91%E9%83%A8%E5%88%86%E7%94%B3%E8%AF%B7%E6%88%90%E5%8A%9F%E9%94%81%E7%9A%84%20master%20%E8%8A%82%E7%82%B9%E4%B8%8A%E6%89%A7%E8%A1%8C%E9%87%8A%E6%94%BE%E9%94%81%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E9%87%8D%E7%BD%AE%E7%8A%B6%E6%80%81</center></span>
</div></body></html> 